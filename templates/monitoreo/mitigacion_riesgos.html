{% extends "base.html" %}

{% block extra_js %}
<script src="/static/js/highcharts.js"></script>
<script src="/static/js/exporting.js"></script>
<script type="text/javascript">
    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                defaultSeriesType: 'column'
            },
            title: {
                text: 'Mitigación de Riesgos'
            },
            subtitle: {
                text: ''
            },
            xAxis: {
                categories: [
                    'Opciones'
                ]
            },
            yAxis: {
                min: 0,
                title: {
                    text: 'Porcentajes (%)'
                }
            },
            
            tooltip: {
                formatter: function() {
                    return ''+
                        this.series.name +': '+ this.y +'';
                }
            },
            plotOptions: {
                column: {
                    groupPadding: 0,
                    pointPadding: 0.9,
                    borderWidth: 0
                },
                series: {
                    pointWidth: 55,
                    minPointLength : 1
                }
            },
            series: [{% for key, value in tabla.items %}
                {
                    name: '{{key}}',
                    data: [{{value.por_mitigacion}}],
                    dataLabels: {
                        enabled: true,
                        rotation: 0,
                        color: '#632D00',
                        align: 'center',
                        x: -3,
                        y: 0,
                            formatter: function() {
                                return this.y + '%';
                                                  },
                        style: {
                            font: 'normal 13px Verdana, sans-serif'
                                }
                                }
                },
                {% endfor %}]
        });
    });
</script>
{% endblock extra_js %}

{% block content %}
<div class="row">
	<div class="col-md-6 col-lg-6">
		<div id="container4"></div>
	</div>
	<div class="col-md-6 col-lg-6">
		<table class="table table-striped table-hover">
			<caption>Mitigración de los riesgos</caption>
			<thead>
				<tr>
					<th>Tipo</th>
					<th>Frecuencia</th>
					<th>%</th>
				</tr>
			</thead>
			<tbody>
				{%for key, value in tabla_drenaje.items%}
	            <tr>
	                <td>{{key}}</td>
	                <td>{{value.drenaje|floatformat}}</td>
	                <td>{{value.por_drenaje|floatformat}}</td>
            	</tr>  
                {%endfor%}
			</tbody>
		</table>
	</div>
</div>
{% include "monitoreo/indicadores.html" %}
{% endblock content %}